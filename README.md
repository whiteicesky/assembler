# Задание

Разработать ассемблер и интерпретатор для учебной виртуальной машины (УВМ). Система команд УВМ представлена далее.

Для ассемблера необходимо разработать читаемое представление команд УВМ. Ассемблер принимает на вход файл с текстом исходной программы, путь к которому задается из командной строки. 

Результатом работы ассемблера является бинарный файл в виде последовательности байт, путь к которому задается из командной строки. Дополнительный ключ командной строки задает путь к файлу-логу, в котором хранятся ассемблированные инструкции в духе списков “ключ=значение”, как в приведенных далее тестах.

Интерпретатор принимает на вход бинарный файл, выполняет команды УВМ и сохраняет в файле-результате значения из диапазона памяти УВМ. Диапазон также указывается из командной строки.

Форматом для файла-лога и файла-результата является JSON.

Необходимо реализовать приведенные тесты для всех команд, а также написать и отладить тестовую программу.

---

## Система команд УВМ

### Загрузка константы

A: Биты 0-4, 26
B: Биты 5-11, Адрес
С: Биты 12-34, Константа

Размер команды: 5 байт. Операнд: поле C. Результат: регистр по адресу,
которым является поле B.

Тест (A=26, B=60, C=981):
0x9A, 0x57, 0x3D, 0x00, 0x00

---

### Чтение значения из памяти

A: Биты 0-4, 28
B: Биты 5-11, Адрес
С: Биты 12-17, Смещение
D: Биты 18-24, Адрес

Размер команды: 4 байт. Операнд: значение в памяти по адресу, которым
является сумма адреса (регистр по адресу, которым является поле D) и смещения
(поле C). Результат: регистр по адресу, которым является поле B.

Тест (A=28, B=40, C=31, D=58):
0x1C, 0xF5, 0xE9, 0x00

---

### Запись значения в память

A: Биты 0-4, 1
B: Биты 5-11, Адрес
С: Биты 12-17, Смещение
D: Биты 18-24, Адрес

Размер команды: 4 байт. Операнд: регистр по адресу, которым является поле
D. Результат: значение в памяти по адресу, которым является сумма адреса
(регистр по адресу, которым является поле B) и смещения (поле C).

Тест (A=1, B=71, C=3, D=51):
0xE1, 0x38, 0xCC, 0x00

---

### Бинарная операция: "<"

A: Биты 0-4, 15
B: Биты 5-11, Адрес
С: Биты 12-17, Смещение
D: Биты 18-24, Адрес

Размер команды: 4 байт. Первый операнд: регистр по адресу, которым
является поле D. Второй операнд: значение в памяти по адресу, которым является
сумма адреса (регистр по адресу, которым является поле B) и смещения (поле C).
Результат: регистр по адресу, которым является поле D.

Тест (A=15, B=39, C=34, D=37):
0xEF, 0x24, 0x96, 0x00

---

## Тестовая программа

Выполнить поэлементно операцию "<" над двумя векторами длины 5.
Результат записать в первый вектор.

## Запуск
1. Перейти в папку с проектом
  ```
    cd C:\Python\homework4
  ```  
2. Создать файл program.asm с программой на ассемблере

  ![Screenshot_1](https://github.com/whiteicesky/assembler/blob/main/Screenshot_1.png)
  
3. Ввести команду для работы ассемблера
    ```
    python assembler.py assemble program.asm program.bin
    ```
4. Результат работы ассемблера

  ![Screenshot_2](https://github.com/whiteicesky/assembler/blob/main/Screenshot_2.png)

5. Ввести команду для работы интерпретатора
    ```
    python assembler.py interpret program.bin result.json --start 0 --end 5
    ```
6. Результат рабоыт интерпретатора

  ![Screenshot_3](https://github.com/whiteicesky/assembler/blob/main/Screenshot_3.png)
   
7. Результат в файле result.json

   ![Screenshot_4](https://github.com/whiteicesky/assembler/blob/main/Screenshot_4.png)

## Тестирование
В папке с проектом запустить команду
    ```
    python -m unittest test.py
    ```

Результат

  ![Screenshot_5](https://github.com/whiteicesky/assembler/blob/main/Screenshot_5.png)
